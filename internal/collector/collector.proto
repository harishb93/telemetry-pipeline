syntax = "proto3";

package collector;

service CollectorService {
  // RPC to get all GPU IDs
  rpc GetAllGPUIds (Empty) returns (GPUIdsResponse);

  // RPC to get telemetry data for a specific GPU ID
  rpc GetTelemetry (TelemetryRequest) returns (TelemetryResponse);
}

// Empty message for requests without parameters
message Empty {}

// Response containing a list of GPU IDs
message GPUIdsResponse {
  repeated string gpu_ids = 1;
}

// Request for telemetry data
message TelemetryRequest {
  string gpu_id = 1;
  string start_time = 2; // ISO 8601 format
  string end_time = 3;   // ISO 8601 format
  int32 limit = 4;
  int32 offset = 5;
}

// Response containing telemetry data
message TelemetryResponse {
  repeated TelemetryEntry entries = 1;
}

// Telemetry data entry
message TelemetryEntry {
  string timestamp = 1; // ISO 8601 format
  string gpu_id = 2;
  string metric = 3;
  double value = 4;
}